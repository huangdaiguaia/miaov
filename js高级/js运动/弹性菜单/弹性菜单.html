<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>弹性菜单</title>
	<style>
		*{
			margin: 0;
			padding: 0;
		}
		li{
			list-style: none;
		}
		ul{

			margin: 10px auto;
		}
		li{
			height: 30px;
			width: 60px;
			line-height: 30px;
			text-align: center;
			/*border: 1px solid #555;*/
			background: #000;
			float: left;
			cursor: pointer;
		}
		a{
			display: block;
			color: #0ff;
			text-decoration: none;
		}
		a:hover{
			background: #000;
			color: #c00;
		}
	</style>
	<script>
		window.onload=function(){
			var oUl=document.getElementById('menu')
			var aLi=document.getElementsByTagName('li');

			for(var i=0;i<aLi.length;i++){
				aLi[i].onmouseover=function(){
					flexMove(this,300);
				}
				aLi[i].onmouseout=function(){
					flexMove(this,30);
				}
			}

			// 为啥子会弹过头??
			function flexMove(obj,iTarget){
				obj.iSpeed=0;

				clearInterval(obj.timer);
				obj.timer=setInterval(function(){
					obj.iSpeed+=(iTarget-obj.offsetHeight)/6;
					obj.iSpeed*=0.75;

					if(Math.abs(obj.iSpeed)<1&&Math.abs(iTarget-obj.offsetHeight)<1){
						clearInterval(obj.timer);
						obj.iSpeed=0;
						obj.style.height=iTarget+'px';
					}else{
						var H=obj.offsetHeight+obj.iSpeed;

						if(H<2){        //防止弹过头
							H=2;
						}
						obj.style.height=H+'px';
					}
				},30);
			}
		}
	</script>
</head>
<body>
<ul id="menu">
	<li><a href="#">菜单一</a></li>
	<li><a href="#">菜单二</a></li>
	<li><a href="#">菜单三</a></li>
	<li><a href="#">菜单四</a></li>
	<li><a href="#">菜单五</a></li>
</ul>
</body>
</html>
